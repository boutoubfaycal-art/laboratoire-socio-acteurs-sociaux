<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم الإدارة - مخبر الدراسات السوسيولوجية للفاعلين الاجتماعيين</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <style>
        .admin-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .stat-card {
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Admin Header -->
    <header class="admin-header text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-reverse space-x-4">
                    <i class="fas fa-cog text-3xl"></i>
                    <div>
                        <h1 class="text-2xl font-bold">لوحة تحكم الإدارة</h1>
                        <p class="text-sm opacity-90">Administration Dashboard</p>
                    </div>
                </div>
                <div class="flex items-center space-x-reverse space-x-4">
                    <a href="../" class="bg-white text-blue-800 px-4 py-2 rounded-lg hover:bg-blue-50 transition">
                        <i class="fas fa-home ml-2"></i>
                        العودة للموقع
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="container mx-auto px-4 py-8">
        <!-- Dashboard Stats -->
        <div class="grid md:grid-cols-4 gap-6 mb-8">
            <div class="stat-card bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-lg">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-blue-100 text-sm">إجمالي الأعضاء</p>
                        <p class="text-2xl font-bold" id="adminTotalMembers">25</p>
                    </div>
                    <i class="fas fa-users text-4xl text-blue-200"></i>
                </div>
            </div>

            <div class="stat-card bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-lg">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-green-100 text-sm">المنشورات</p>
                        <p class="text-2xl font-bold" id="adminTotalPublications">42</p>
                    </div>
                    <i class="fas fa-book text-4xl text-green-200"></i>
                </div>
            </div>

            <div class="stat-card bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-lg">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-purple-100 text-sm">الأنشطة</p>
                        <p class="text-2xl font-bold" id="adminTotalActivities">3</p>
                    </div>
                    <i class="fas fa-calendar-alt text-4xl text-purple-200"></i>
                </div>
            </div>

            <div class="stat-card bg-gradient-to-r from-orange-500 to-orange-600 text-white p-6 rounded-lg">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-orange-100 text-sm">الزيارات</p>
                        <p class="text-2xl font-bold" id="adminTotalVisits">1,234</p>
                    </div>
                    <i class="fas fa-eye text-4xl text-orange-200"></i>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-6">الإجراءات السريعة</h2>
            <div class="grid md:grid-cols-3 gap-4">
                <button id="addMemberBtn" class="bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-lg transition flex items-center justify-center">
                    <i class="fas fa-user-plus ml-3 text-xl"></i>
                    <span>إضافة عضو</span>
                </button>

                <button id="addPublicationBtn" class="bg-green-600 hover:bg-green-700 text-white p-4 rounded-lg transition flex items-center justify-center">
                    <i class="fas fa-plus ml-3 text-xl"></i>
                    <span>إضافة منشور</span>
                </button>

                <button id="addActivityBtn" class="bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-lg transition flex items-center justify-center">
                    <i class="fas fa-calendar-plus ml-3 text-xl"></i>
                    <span>إضافة نشاط</span>
                </button>
            </div>
        </div>

        <!-- Management Sections -->
        <div class="grid lg:grid-cols-3 gap-8">
            <!-- Members Management -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-users text-blue-600 ml-3"></i>
                    <span>إدارة الأعضاء</span>
                </h3>

                <div class="space-y-4" id="membersList">
                    <!-- Members will be loaded here -->
                </div>

                <div class="mt-6">
                    <button class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg transition">
                        <i class="fas fa-list ml-2"></i>
                        <span>عرض جميع الأعضاء</span>
                    </button>
                </div>
            </div>

            <!-- Publications Management -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-book text-green-600 ml-3"></i>
                    <span>إدارة المنشورات</span>
                </h3>

                <div class="space-y-4" id="publicationsAdminList">
                    <!-- Publications will be loaded here -->
                </div>

                <div class="mt-6">
                    <button class="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg transition">
                        <i class="fas fa-list ml-2"></i>
                        <span>عرض جميع المنشورات</span>
                    </button>
                </div>
            </div>

            <!-- Activities Management -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-calendar-alt text-purple-600 ml-3"></i>
                    <span>إدارة الأنشطة</span>
                </h3>

                <div class="space-y-4" id="activitiesList">
                    <!-- Activities will be loaded here -->
                </div>

                <div class="mt-6">
                    <button class="w-full bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-lg transition">
                        <i class="fas fa-list ml-2"></i>
                        <span>عرض جميع الأنشطة</span>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Add Member Modal -->
    <div id="addMemberModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full p-8">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">إضافة عضو جديد</h2>
                    <button id="closeAddMemberModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <form id="addMemberForm" class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">الاسم (عربي)</label>
                            <input type="text" name="nameAr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">الاسم (فرنسي)</label>
                            <input type="text" name="nameFr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">المنصب (عربي)</label>
                            <input type="text" name="roleAr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">المنصب (فرنسي)</label>
                            <input type="text" name="roleFr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">الفئة</label>
                        <select name="category" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                            <option value="professeurs">أساتذة</option>
                            <option value="chercheurs">باحثون</option>
                            <option value="doctorants">طلاب دكتوراه</option>
                        </select>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">مجال البحث (عربي)</label>
                            <input type="text" name="researchAr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">مجال البحث (فرنسي)</label>
                            <input type="text" name="researchFr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">البريد الإلكتروني</label>
                        <input type="email" name="email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                    </div>

                    <div class="flex justify-end space-x-reverse space-x-4 pt-6">
                        <button type="button" id="cancelAddMember" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                            إلغاء
                        </button>
                        <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                            <i class="fas fa-save ml-2"></i>
                            حفظ
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Publication Modal -->
    <div id="addPublicationModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full p-8">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">إضافة منشور جديد</h2>
                    <button id="closeAddPublicationModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <form id="addPublicationForm" class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">عنوان المنشور (عربي)</label>
                            <input type="text" name="titleAr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">عنوان المنشور (فرنسي)</label>
                            <input type="text" name="titleFr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">المؤلفون (عربي)</label>
                            <input type="text" name="authorsAr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">المؤلفون (فرنسي)</label>
                            <input type="text" name="authorsFr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-3 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">السنة</label>
                            <input type="number" name="year" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">المجلة (عربي)</label>
                            <input type="text" name="journalAr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">المجلة (فرنسي)</label>
                            <input type="text" name="journalFr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">نوع المنشور</label>
                        <select name="type" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                            <option value="article">مقالة</option>
                            <option value="book">كتاب</option>
                            <option value="conference">مؤتمر</option>
                        </select>
                    </div>

                    <div class="flex justify-end space-x-reverse space-x-4 pt-6">
                        <button type="button" id="cancelAddPublication" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                            إلغاء
                        </button>
                        <button type="submit" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
                            <i class="fas fa-save ml-2"></i>
                            حفظ
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Activity Modal -->
    <div id="addActivityModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full p-8">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800">إضافة نشاط جديد</h2>
                    <button id="closeAddActivityModal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <form id="addActivityForm" class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">عنوان النشاط (عربي)</label>
                            <input type="text" name="titleAr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">عنوان النشاط (فرنسي)</label>
                            <input type="text" name="titleFr" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">وصف النشاط (عربي)</label>
                        <textarea name="descriptionAr" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required></textarea>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">وصف النشاط (فرنسي)</label>
                        <textarea name="descriptionFr" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required></textarea>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">تاريخ النشاط</label>
                            <input type="date" name="date" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">المكان</label>
                            <input type="text" name="location" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">نوع النشاط</label>
                        <select name="type" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                            <option value="conference">مؤتمر</option>
                            <option value="workshop">ورشة عمل</option>
                            <option value="seminar">ندوة</option>
                            <option value="study_day">يوم دراسي</option>
                        </select>
                    </div>

                    <div class="flex justify-end space-x-reverse space-x-4 pt-6">
                        <button type="button" id="cancelAddActivity" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition">
                            إلغاء
                        </button>
                        <button type="submit" class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">
                            <i class="fas fa-save ml-2"></i>
                            حفظ
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Admin-specific initialization
        document.addEventListener('DOMContentLoaded', function() {
            // Load admin data
            loadDataFromLocalStorage();
            updateDashboardStats();
            loadDashboardData();

            // Setup admin event listeners for this page
            setupAdminPageEventListeners();
        });

        function setupAdminPageEventListeners() {
            // Add member button
            const addMemberBtn = document.getElementById('addMemberBtn');
            if (addMemberBtn) {
                addMemberBtn.addEventListener('click', () => {
                    document.getElementById('addMemberModal').classList.remove('hidden');
                });
            }

            // Add publication button
            const addPublicationBtn = document.getElementById('addPublicationBtn');
            if (addPublicationBtn) {
                addPublicationBtn.addEventListener('click', () => {
                    document.getElementById('addPublicationModal').classList.remove('hidden');
                });
            }

            // Add activity button
            const addActivityBtn = document.getElementById('addActivityBtn');
            if (addActivityBtn) {
                addActivityBtn.addEventListener('click', () => {
                    document.getElementById('addActivityModal').classList.remove('hidden');
                });
            }

            // Close modals
            const closeAddMember = document.getElementById('closeAddMemberModal');
            if (closeAddMember) {
                closeAddMember.addEventListener('click', () => {
                    document.getElementById('addMemberModal').classList.add('hidden');
                });
            }

            const closeAddPublication = document.getElementById('closeAddPublicationModal');
            if (closeAddPublication) {
                closeAddPublication.addEventListener('click', () => {
                    document.getElementById('addPublicationModal').classList.add('hidden');
                });
            }

            const closeAddActivity = document.getElementById('closeAddActivityModal');
            if (closeAddActivity) {
                closeAddActivity.addEventListener('click', () => {
                    document.getElementById('addActivityModal').classList.add('hidden');
                });
            }

            // Cancel buttons
            const cancelAddMember = document.getElementById('cancelAddMember');
            if (cancelAddMember) {
                cancelAddMember.addEventListener('click', () => {
                    document.getElementById('addMemberModal').classList.add('hidden');
                });
            }

            const cancelAddPublication = document.getElementById('cancelAddPublication');
            if (cancelAddPublication) {
                cancelAddPublication.addEventListener('click', () => {
                    document.getElementById('addPublicationModal').classList.add('hidden');
                });
            }

            const cancelAddActivity = document.getElementById('cancelAddActivity');
            if (cancelAddActivity) {
                cancelAddActivity.addEventListener('click', () => {
                    document.getElementById('addActivityModal').classList.add('hidden');
                });
            }

            // Form submissions
            const addMemberForm = document.getElementById('addMemberForm');
            if (addMemberForm) {
                addMemberForm.addEventListener('submit', handleAddMember);
            }

            const addPublicationForm = document.getElementById('addPublicationForm');
            if (addPublicationForm) {
                addPublicationForm.addEventListener('submit', handleAddPublication);
            }

            const addActivityForm = document.getElementById('addActivityForm');
            if (addActivityForm) {
                addActivityForm.addEventListener('submit', handleAddActivity);
            }
        }
    </script>
</body>
</html>
